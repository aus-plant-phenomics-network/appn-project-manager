# yaml-language-server: $schema=../schema/yaml_template_schema.json
#
# This template has an output directory structure like the following:
#
# structure: ['organisationName', 'project', 'site', 'platform']
#
#              organisationName (node: AU)
#                 └── project  (project: 2025_SIFOzBarley)  ------------> project e.g. 2025_SIFOzBarley
#                        └── site  (site: Roseworthy)
#                              <-----------------------------------------  directory structure is automated from:
#                             └── platform  ( phenomate | amiga | Gobi)  <---  here
#                                  └── date    (date: 20250820  <--> 2025-08-20)
#                                       └── run (run: run00)
#                                            └── procLevel (processing level: T0-raw)
#                                                  └── sensor (jai | RGB)
#
# An example derived from input filename: 2025-08-14_06-30-03_393242_0814_run00_jai_0.bin
#
# Inputs from protobuf file filename:
#  run = run00
#  sensor = jai
#  date = 2025-08-14
#
# Inputs from Phenomate GUI:
#  platform = phenomate_1
#  project  = SIFOzBarley
#  site = Roseworthy
#  summary  = October Barley
#  year = 2025
#  internal = T | F
#  researcherName = josh             ------------>  save to json?
#  organisationName = Adelaide       ------------>  save to json?
#
# Final output structure:
#  <root>/adelaide/sifozbarley/roseworthy/phenomate_1/2025-08-14/run00/T0-raw/jai

version: 0.0.8
naming_convention:
  # Use `sep: "/"` to specify elements as separate
  #   directories : <root>/organisationName/project/site/platform
  # or any other string e.g. `sep: "_"` to concatenate all elements into
  #   a single directory name : <root>/organisationName_project_site_platform
  sep: "/"
  structure: ['organisationName', 'project', 'site', 'platform']
layout:
  structure: [  'date', 'run', 'procLevel', 'sensor' ]
  mapping:
    procLevel:
      raw: 'T0-raw'
      proc: 'T1-proc'
      trait: 'T2-trait'
file:
  "*":
    sep: "_"
    default:
      procLevel: raw
    components:
      - sep: "_"
        components:
          - ['date', '\d{4}-\d{2}-\d{2}']
          - ['time', '\d{2}-\d{2}-\d{2}']
      - ['ms', '\d{6}']
      - ['dateshort', '\d{4}']
      - ['run', '[^_.]+']
      - ['sensor', '[^_.]+']
      - name: 'procLevel'
        pattern: 'T0-raw|T1-proc|T2-trait|raw|proc|trait'
        required: false
